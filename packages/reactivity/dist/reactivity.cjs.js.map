{"version":3,"file":"reactivity.cjs.js","sources":["../../shared/src/index.ts","../src/effect.ts","../src/baseHandlers.ts","../src/reactive.ts","../src/ref.ts"],"sourcesContent":["\nexport const isObject = (value) => typeof value == 'object' && value !== null;\n\nexport const extend = Object.assign;\n\nexport const isArray = Array.isArray;\n\nexport const isFunction = (value) => typeof value === 'function';\n\nexport const isNumber = (value) => typeof value === 'number';\n\nexport const isString = (value) => typeof value === 'string';\n\nexport const isIntegerKey = (key) => parseInt(key) + '' === key;\n\nlet hasOwnProperty = Object.prototype.hasOwnProperty;\nexport const hasOwn = (target, key) => hasOwnProperty.call(target, key);\n\nexport const hasChanged = (oldValue, newValue) => oldValue !== newValue;","import { isArray, isIntegerKey } from \"@vue/shared\";\nimport { TriggerOpTypes } from \"./operators\";\n\nexport function effect(fn, options: any={}) {\n    // 我们需要让这个effect变成响应式的effect，可以做到数据变化重新执行\n    const effect = createReactiveEffect(fn, options);\n\n    if (!options.lazy) {\n        effect(); // 响应式effect默认会先执行一次\n    }\n\n    return effect;\n}\n\nlet uid = 0;\nlet activeEffect;\nconst effectStack = [];\nfunction createReactiveEffect(fn, options) {\n    const effect = function reactiveEffect() {\n        if (!effectStack.includes(effect)) {\n            try {\n                effectStack.push(effect);\n                activeEffect = effect;\n                return fn(); // 这里执行函数会进行取值，那么就会调用get方法\n            } finally {\n                effectStack.pop();\n                activeEffect = effectStack[effectStack.length - 1];\n            }\n        }\n    }\n    effect.id = uid++; // 制作一个effect标识，用于区分effect\n    effect._isEffect = true; // 用于标识这个是响应式的effect\n    effect.raw = fn; // 保留effect对应的原函数\n    effect.options = options; // 在effect上保存用户的属性\n    return effect;\n}\n\n\nconst targetMap = new WeakMap();\n// 让某个对象中的属性收集当前它对应的effect函数\nexport function track(target, type, key) {\n    // activeEffect 当前正在运行的effect\n    if (activeEffect === undefined) { // 此属性不用收集依赖，因为没在effect中使用\n        return;\n    }\n    let depsMap = targetMap.get(target);\n    if (!depsMap) {\n        targetMap.set(target, (depsMap = new Map));\n    }\n    let dep = depsMap.get(key);\n    if (!dep) {\n        depsMap.set(key, (dep = new Set));\n    }\n    if (!dep.has(activeEffect)) {\n        dep.add(activeEffect);\n    }\n    console.log(targetMap);\n}\n\n// 下面代码有问题，需要利用栈来解决\n// effect(() => {\n//     state.name   --> effect1\n//     effect(() => {\n//         state.age --> effect2\n//     })\n//     state.name --> effect2\n// })\n\n// 为了避免无限循环，需要加上判断，判断effect是否已经在栈中了\n// effect(() => {\n//     state.age ++;\n// })\n\n// 找属性对应的effect让其执行（数组、对象）\nexport function trigger(target, type, key?, newValue?, oldValue?) {\n    // console.log('trigger');\n    // 如果这个属性没有收集过effect，那么不需要做任何操作\n    const depsMap = targetMap.get(target);\n    if (!depsMap) return;\n\n    const effects = new Set();\n    const add = (effectsToAdd) => {\n        if (effectsToAdd) {\n            effectsToAdd.forEach(effect => effects.add(effect));\n        }\n    }\n    // 我们要将所有要执行的effect，全部存到一个新的集合中，最终一起执行\n\n    \n    // 1. 看修改的是不是数组的长度，因为改长度的影响比较大\n    if (key === 'length' && isArray(target)) {\n        console.log(depsMap);\n        // 如果对应的长度，有依赖收集需要更新\n        depsMap.forEach((dep, key) => {\n            if (key === 'length' || key > newValue) {\n                add(dep);\n            }\n        });\n    } else {\n        // 可能是对象\n        if (key !== undefined) { // 这里是修改，不能是新增\n            add(depsMap.get(key));\n        }\n\n        switch(type) { // 如果添加了一个索引，就触发长度的更新\n            case TriggerOpTypes.ADD:\n                if (isArray(target) && isIntegerKey(key)) {\n                    add(depsMap.get('length'));\n                }\n        }\n    }\n    effects.forEach((effect: Function) => {\n        effect();\n    })\n}","\n// 是不是仅读的，仅读的属性set时会报异常\n// 是不是深度的\n\nimport { extend, hasChanged, hasOwn, isArray, isIntegerKey, isObject } from \"@vue/shared\";\nimport { track, trigger } from \"./effect\";\nimport { readonly, reactive } from \"./reactive\";\nimport { TrackOpTypes, TriggerOpTypes } from \"./operators\";\n\nfunction createGetter(isReadonly = false, shallow = false) { // 拦截获取功能\n    return function get(target, key, receiver) {\n        // 后续Object上的方法会迁移到Reflect上\n        // 以前target[key] = value 方式设置值可能会失败，并不会报异常，也没有返回值标识\n        // Reflect方法具备返回值\n        \n        const res = Reflect.get(target, key, receiver);\n\n        if (!isReadonly) {\n            // 收集依赖，等会数据变化后更新对应的视图\n            // console.log(\"执行effect的时候会取值，收集effect\");\n            track(target, TrackOpTypes.GET, key);\n        }\n\n        if (shallow) {\n            return res;\n        }\n\n        if (isObject(res)) { // vue2是一上来就递归，vue3是当取值时进行代理。懒代理\n            return isReadonly ? readonly(res) : reactive(res);\n        }\n        return res;\n    }\n}\n\nfunction createSetter(shallow = false) { // 拦截设置功能\n    return function set(target, key, value, receiver) {\n        const oldValue = target[key]; // 取老值\n\n        let hadKey = isArray(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target, key);\n\n        const result = Reflect.set(target, key, value, receiver);\n\n        // 我们要区分是【新增】还是【修改】，vue2中无法监控更改索引，无法监控数组的长度，vue3中可以，hack方法，需要特殊处理\n        if (!hadKey) {\n            // 新增\n            trigger(target, TriggerOpTypes.ADD, key, value);\n        } else if (hasChanged(oldValue, value)) {\n            // 修改\n            trigger(target, TriggerOpTypes.SET, key, value, oldValue);\n        }\n\n        // 数据更新时，通知对应属性的effect重新执行\n    }\n}\n\nconst get = createGetter();\nconst shallowGet = createGetter(false, true);\nconst readonlyGet = createGetter(true, false);\nconst shallowReadonlyGet = createGetter(true, true);\n\nconst set = createSetter();\nconst shallowSet = createSetter(true);\n\nexport const mutableHandlers = {\n    get,\n    set\n}\nexport const shallowReactiveHandlers = {\n    get: shallowGet,\n    set: shallowSet\n}\n\nlet readonlyObj = {\n    set: (target, key) => {\n        console.warn(`set on key ${key} failed`);\n    }\n}\n\nexport const readonlyHandlers = extend({\n    get: readonlyGet\n}, readonlyObj);\n\n\nexport const shallowReadonlyHandlers = extend({\n    get: shallowReadonlyGet\n}, readonlyGet);","import { isObject } from \"@vue/shared\";\nimport {\n    mutableHandlers,\n    shallowReactiveHandlers,\n    readonlyHandlers,\n    shallowReadonlyHandlers\n} from './baseHandlers';\n\nexport function reactive(target) {\n    return createReactiveObject(target, false, mutableHandlers);\n}\n\nexport function shallowReactive(target) {\n    return createReactiveObject(target, false, shallowReactiveHandlers);\n}\n\nexport function readonly(target) {\n    return createReactiveObject(target, true, readonlyHandlers);\n}\n\nexport function shallowReadonly(target) {\n    return createReactiveObject(target, true, shallowReadonlyHandlers);\n}\n\nconst reactiveMap = new WeakMap(); // 会自动垃圾回收，不会造成内存泄漏。存储的key只能是对象\nconst readonlyMap = new WeakMap();\n\n// 柯里化\n// new Proxy() 最核心的需要拦截，数据的读取和数据的修改 get/set\nexport function createReactiveObject(target, isReadonly, baseHandler) {\n    // 该方法只能对对象做响应式\n    if (!isObject(target)) return;\n\n    const proxyMap = isReadonly ? readonlyMap : reactiveMap;\n    // 如果某个对象已经被代理了，那么就不要再次代理\n    const existProxy = proxyMap.get(target);\n    if (existProxy) {\n        return existProxy;\n    }\n    const proxy = new Proxy(target, baseHandler);\n    proxyMap.set(target, proxy);\n\n    return proxy;\n}","import { hasChanged, isArray, isObject } from \"@vue/shared\";\nimport { track, trigger } from \"./effect\";\nimport { TrackOpTypes, TriggerOpTypes } from \"./operators\";\nimport { reactive } from \"./reactive\";\n\nexport function ref(value) {\n    // 将普通类型变成一个对象，也可以是对象，但是一般情况下是对象直接用reactive更合理\n    return createRef(value);\n}\n\n// ref和reactive的区别：reactive内部采用proxy，ref中内部使用的是defineProperty\n\nexport function shallowRef(value) {\n    return createRef(value, true);\n}\n\nconst convert = (val) => isObject(val) ? reactive(val) : val;\n\nclass RefImpl {\n    public _value; // 表示声明了一个_value属性，但是没有赋值\n    public __v_isRef = true;\n    constructor(public rawValue, public shallow) {\n        this._value = shallow ? rawValue : convert(rawValue);\n    }\n\n    // 类的属性访问器\n    get value() {\n        track(this, TrackOpTypes.GET, 'value');\n        return this._value;\n    }\n\n    set value(newValue) {\n        if (hasChanged(this.rawValue, newValue)) {\n            this.rawValue = newValue;\n            this._value = this.shallow ? newValue : convert(newValue);\n            trigger(this, TriggerOpTypes.SET, 'value', newValue);\n        }\n    }\n}\n\nexport function createRef(rawValue, shallow = false) {\n    return new RefImpl(rawValue, shallow);\n}\n\nclass ObjectRefImpl {\n    public __v_isRef = true;\n\n    constructor(public target, public key) {\n\n    }\n\n    get value() {\n        return this.target[this.key]; // 如果原来对象是响应式的就会进行依赖收集\n    }\n\n    set value(newValue) {\n        this.target[this.key] = newValue; // 如果原来对象是响应式的，就会触发更新\n    }\n}\n\nexport function toRef(target, key) {\n    return new ObjectRefImpl(target, key);\n}\n\nexport function toRefs(obj) {\n    const ret = isArray(obj) ? new Array(obj.length) : {};\n    for (let key in obj) {\n        ret[key] = toRef(obj, key);\n    }\n    return ret;\n} "],"names":[],"mappings":"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"}